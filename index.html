<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nursing Prometric Simulation Test Dashboard</title>
<!-- Confetti Library -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
  * { box-sizing: border-box; margin:0; padding:0; }
  body, html { width:100%; height:100%; font-family:Arial,sans-serif; }

  /* Landing Page */
  #landingPage { width:100%; height:100%; background:#f0f0f0; transition: filter 0.3s ease; }

  .top-image { width:100%; height:50vh; background: url('https://raw.githubusercontent.com/gyoutrain-lab/production-prometrictest6/main/assets/TView1.jpg') no-repeat center center; background-size:cover; }
  .title-container { position:relative; width:100%; text-align:center; margin-top:-50px; padding:40px 20px; color:#fff; }
  .title-container::before { content:""; position:absolute; top:0; left:0; width:100%; height:100%; background:url('https://raw.githubusercontent.com/gyoutrain-lab/production-prometrictest6/main/assets/TView2.jpg') repeat; background-size:cover; opacity:0.3; z-index:-1; animation: flow 30s linear infinite; }
  @keyframes flow { 0%{background-position:0 0;} 100%{background-position:1000px 0;} }
  .title-container h1{ font-size:2rem; margin-bottom:10px; font-weight:bold; }
  .title-container h2{ font-size:1rem; font-weight:normal; }

  .middle { padding:20px; text-align:center; }
  .social a { margin:0 10px; display:inline-block; }
  .social img { width:40px; height:40px; transition:0.3s; }
  .social img:hover { transform:scale(1.2); }

  .bottom-buttons { position:fixed; bottom:20px; left:20px; }
  .bottom-buttons button { padding:12px 25px; font-size:1rem; border:none; border-radius:10px; background:#74ebd5; cursor:pointer; transition:0.3s; }
  .bottom-buttons button:hover { background:#ACB6E5; color:#fff; }

  .dana-qr { position:fixed; bottom:20px; right:20px; }
  .dana-qr img { width:80px; height:80px; }

  /* Quiz Overlay */
  #quizOverlay { display:none; position:fixed; z-index:999; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); backdrop-filter: blur(5px); overflow:auto; padding:20px; }
  #quizContent { max-width:900px; margin:0 auto; background:#fff; border-radius:15px; padding:20px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
  .closeQuiz { position:absolute; top:20px; right:30px; color:#fff; font-size:28px; font-weight:bold; cursor:pointer; z-index:1000; }
  .closeQuiz:hover { color:#f0f0f0; }

  @media (max-width:768px){
    .title-container h1{ font-size:1.5rem; }
    .title-container h2{ font-size:0.9rem; }
    .social img{ width:35px; height:35px; }
    .dana-qr img{ width:60px; height:60px; }
    .bottom-buttons button{ padding:10px 20px; font-size:0.9rem; }
    #quizContent{ width:95%; padding:15px; }
  }
</style>
</head>
<body>

<!-- Landing Page -->
<div id="landingPage">
  <div class="top-image"></div>
  <div class="title-container">
    <h1>Nursing Prometric Actual Simulation Test</h1>
    <h2>Based on Prometric/SMLE Saudi Arabia & NCLEX materials, adapted by Giyono Asfarrasyid, ETK Yogyakarta</h2>
  </div>
  <div class="middle">
    <div class="social">
      <a href="tel:+6285399652487"><img src="https://cdn-icons-png.flaticon.com/512/597/597177.png" alt="Phone"></a>
      <a href="https://wa.me/6285399652487"><img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp"></a>
      <a href="mailto:gyoutrain@gmail.com"><img src="https://cdn-icons-png.flaticon.com/512/732/732200.png" alt="Email"></a>
      <a href="https://web.facebook.com/gyouskill/"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook"></a>
      <a href="https://www.instagram.com/etkyogya"><img src="https://cdn-icons-png.flaticon.com/512/733/733558.png" alt="Instagram"></a>
    </div>
  </div>
  <div class="bottom-buttons">
    <button onclick="startQuiz()">Start Quiz</button>
  </div>
  <div class="dana-qr">
    <img src="https://raw.githubusercontent.com/gyoutrain-lab/production-prometrictest6/main/assets/danaqr.png" alt="danaqr">
  </div>
</div>

<!-- Quiz Overlay -->
<div id="quizOverlay">
  <span class="closeQuiz" onclick="closeQuiz()">Ã—</span>
  <div id="quizContent"></div>
</div>

<script>
let confettiInterval;

async function startQuiz() {
  const userName = prompt("Enter your Name:");
  const userWA = prompt("Enter your WhatsApp number (include country code, e.g., 62812xxxx)");
  if(!userName || !userWA){ alert("Please provide Name & WhatsApp number."); return; }

  // WhatsApp admin notification
  const adminWA = "6285399652487";
  const message = `Payment Confirmation, User Name: ${userName}, WA#: ${userWA}, Share Proof QR IDR 50k to get the Unlock Code`;
  window.open(`https://wa.me/${adminWA}?text=${encodeURIComponent(message)}`, "_blank");

  // Blur landing page
  document.getElementById("landingPage").style.filter = "blur(5px) brightness(0.7)";

  // Show quiz overlay
  const overlay = document.getElementById("quizOverlay");
  overlay.style.display = "block";

  // Fetch quiz content from Google Apps Script
  try {
    const response = await fetch("https://script.google.com/macros/s/AKfycbzro8Lul3sG36KsNNG5UPU2vpvOHHbH2PKFNk4Czp2-fnFiBVNk_gJPtSOJdrobOIvK/exec");
    const html = await response.text();
    document.getElementById("quizContent").innerHTML = html;
  } catch (error) {
    document.getElementById("quizContent").innerHTML = "<p style='color:red;'>Failed to load quiz. Please try again later.</p>";
    console.error(error);
  }

  // Start confetti animation for 4 seconds
  const end = Date.now() + 4000;
  confettiInterval = setInterval(() => {
    confetti({
      particleCount: 50,
      spread: 70,
      origin: { y: 0.6 },
      colors: ['#ff0a54','#ff477e','#ff7096','#ff85a1','#fbb1b1','#f9bec7','#f7cad0','#fae0e4']
    });
    if(Date.now() > end) clearInterval(confettiInterval);
  }, 250);
}

function closeQuiz() {
  document.getElementById("quizOverlay").style.display = "none";
  document.getElementById("landingPage").style.filter = "none";
  document.getElementById("quizContent").innerHTML = ""; // remove quiz content
  clearInterval(confettiInterval);
}
</script>

</body>
</html>
